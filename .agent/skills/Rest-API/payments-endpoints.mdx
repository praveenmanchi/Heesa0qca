---
title: Endpoints | Developer Docs
slug: /figma/rest-api/payments-endpoints
---

On this page

There are two methods to query for a user's payment information on a plugin, widget, or Community file. The first method, using plugin payment tokens, is typically used when making queries from a plugin's or widget's code. The second method, providing a user ID and resource ID, is typically used when making queries from anywhere else.

Note that you can only query for resources that you own. In most cases, this means that you can only query resources that you originally created.

## GET payments via plugin payment token[​](#get-payments-endpoint-plugin-payment-token "Direct link to GET payments via plugin payment token")

Fetch the payment information of a user from your plugin or widget.

info

This endpoint is rate limited at 300 requests per minute.

### HTTP Endpoint[​](#http-endpoint "Direct link to HTTP Endpoint")

`GET /v1/payments`

**Return value**

The [PaymentInformation](/docs/rest-api/payments-types/#paymentinformation-type) corresponding to the given plugin payment token.

Query parameters

Description

plugin\_payment\_token

`plugin_payment_token`String

Short-lived token returned from "getPluginPaymentTokenAsync" in the plugin payments API and used to authenticate to this endpoint. Read more about generating this token through [Calling the Payments REST API from a plugin or widget](#payments-plugin-payment-token).

Error codes

Description

400

Invalid parameter. The `message` parameter on the response will describe the error.

401

Issue with authentication. The `message` parameter on the response will describe the error.

### Calling the Payments REST API from a plugin or widget[​](#payments-plugin-payment-token "Direct link to Calling the Payments REST API from a plugin or widget")

We offer a method in our plugin payments API that enables you to securely query for the payment status of a user of your plugin or widget. You should use this method if your plugin or widget makes a call to a server endpoint. Follow the [Getting Started guide](/docs/plugins/requiring-payment/#getting-started) to set up the plugin payments API in your plugin or widget.

Once you have enabled the plugin payments API in your plugin's or widget's code, you can call the [getPluginPaymentTokenAsync](/docs/plugins/api/figma-payments/#getpluginpaymenttokenasync) method to generate a secure plugin payment token to provide to this endpoint.

## GET payments via user and resource ID[​](#get-payments-endpoint-user-resource-id "Direct link to GET payments via user and resource ID")

Fetch the payment information of a user on your resource using IDs.

info

This is a [Tier 3 endpoint](/docs/rest-api/rate-limits/#rate-limits-tier-table).

### HTTP Endpoint[​](#http-endpoint-1 "Direct link to HTTP Endpoint")

`GET /v1/payments`

**Return value**

The [PaymentInformation](/docs/rest-api/payments-types/#paymentinformation-type) corresponding to the given user and resource IDs.

Query parameters

Description

user\_id

Number

The ID of the user to query payment information about. You can get the user ID by having the user OAuth2 to the Figma REST API.

community\_file\_id

Number

The ID of the Community file to query a user's payment information on. You can get the Community file ID from the file's Community page (look for the number after `file/` in the URL). Provide exactly one of `community_file_id`, `plugin_id`, or `widget_id`.

plugin\_id

Number

The ID of the plugin to query a user's payment information on. You can get the plugin ID from the plugin's manifest, or from the plugin's Community page (look for the number after `plugin/` in the URL). Provide exactly one of `community_file_id`, `plugin_id`, or `widget_id`.

widget\_id

Number

The ID of the widget to query a user's payment information on. You can get the widget ID from the widget's manifest, or from the widget's Community page (look for the number after `widget/` in the URL). Provide exactly one of `community_file_id`, `plugin_id`, or `widget_id`.

Error codes

Description

400

Invalid parameter. The `message` parameter on the response will describe the error.

401

Issue with authentication. The `message` parameter on the response will describe the error.

*   [GET payments via plugin payment token](#get-payments-endpoint-plugin-payment-token)
*   [GET payments via user and resource ID](#get-payments-endpoint-user-resource-id)
